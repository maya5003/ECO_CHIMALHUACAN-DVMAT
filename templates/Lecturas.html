{% extends "base.html" %}

{% block title %}Lecturas Eco{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='scripts/ScriptSweet.js') }}" defer></script>
<script src="{{ url_for('static', filename='scripts/ScriptLect.js') }}" defer></script>
{% endblock %}

{% block content %}
    <img src="{{ url_for('static', filename='img/Lecturas_Portada.jpg') }}" alt="Lecturas_Portada"
        style="width:100%; height:auto; display:block;">
    <div style="display: flex; align-items: center; gap: 10px;">
        <h2>Busqueda:</h2>
        <div style="position: relative;">
            <input type="text" id="NombreLect" placeholder="Nombre"
                style="border-radius: 8px; font-size: 1.2em; width: 500px;">
            <div id="suggestions" style="position: absolute; top: 100%; left: 0; right: 0; background: white; border: 1px solid #ccc; border-radius: 8px; max-height: 200px; overflow-y: auto; display: none; z-index: 10;"></div>
        </div>
        <button id="btnBuscarLect" type="submit"
            style="background: rgba(51, 102, 0, 0.95); color: #fff; text-decoration: none; border-radius: 8px; font-weight: 600; transition: background 0.18s ease, transform 0.08s ease; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.18); border: none; padding: 10px 16px;">Buscar</button>
    </div>

    <div style="width: 40%; float: left; margin-right: 5%; margin-left: 5%; margin-bottom: 5%;">
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); grid-template-rows: repeat(5, auto); gap: 40px;">
            {% for libro in libros %}
            <div style="width: 350px; height: 625px; background: white; border-radius: 10px; padding: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <img src="{{ url_for('static', filename='img/Libros/' + libro.imagen) }}" alt="Portada Libro {{ libro.nombre }}" style="width: 90%; height: 65%; object-fit: cover; border-radius: 5px; display: block; margin: 0 auto;">
                <p style="font-size: 0.7em; margin-top: 5px;">Sinopsis: {{ libro.sinopsis }} <a href="{{ libro.descarga }}" target="_blank">Descargar Libro en PDF</a></p>
            </div>
            {% endfor %}
        </div>
    </div>

    <div style="width: 25%; float: right; margin-right: 5%; margin-bottom: 5%;">
        <div style="background: white; border-radius: 10px; padding: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h3>Lista de Libros</h3>
            <ul style="list-style-type: none; padding: 0;">
                {% for libro in libros %}
                <li style="margin-bottom: 40px;"><a href="{{ libro.descarga }}" target="_blank">{{ libro.nombre }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <br><br>
    <p style="clear: both;">
        Tienes alguna recomendacion?, reseña? o simplemente quieres compartir tu opinion sobre alguna lectura
        manda tu comentario en nuestro formulario de opiniones <a href="/Comentarios-Lecturas"> has click aqui </a>
    </p>

    <!-- Modal para búsqueda -->
    <div id="book-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: white; border-radius: 10px; padding: 20px; max-width: 500px; text-align: center;">
            <img id="modal-img" src="" alt="Portada" style="width: 275px; height: 300px; object-fit: cover; border-radius: 5px; margin-bottom: 10px;">
            <p id="modal-sinopsis" style="margin-bottom: 10px;"></p>
            <a id="modal-descarga" href="" target="_blank" style="display: block; margin-bottom: 10px;">Descargar</a>
            <button onclick="closeModal()" style="padding: 10px 20px; background: #336600; color: white; border: none; border-radius: 5px;">Cerrar</button>
        </div>
    </div>

    <script>
    window.libros = {{ libros | tojson }};
    </script>
{% endblock %}
